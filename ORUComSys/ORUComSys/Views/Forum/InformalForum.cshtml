@using ORUComSys.Models
@using Datalayer.Models
@model PostViewModels
@{
    int i = 1;
}
<div class="container">
    <div class="row">
        <div class="col-md-9">
            <h2>Informal Forum</h2>
            @using (Html.BeginForm("Informal", "Forum", FormMethod.Post, new { enctype = "multipart/form-data" })) {
                @Html.AntiForgeryToken()
                <div class="card border border-danger bg-light mb-3" id="CreatePostCard">
                    <div class="card-header">
                        <h4><span class="card-title">Create Post</span></h4>
                    </div>
                    <div class="card-body">
                        @Html.EditorFor(model => model.Content, new { htmlAttributes = new { @class = "form-control card-text", @placeholder = "What's on your mind?", @id = "Content" } })
                        <div class="form-group">
                            <input type="file" id="AttachedFile" name="AttachedFile" accept=".jpg, .png, .gif" />
                        </div>
                        <div class="form-group">
                            @Html.DropDownListFor(c => c.Category,
                            new SelectList(Enum.GetValues(typeof(CategoryType))),
                            "Select Category",
                            new { @class = "form-control", @id = "category-selector" })
                            @Html.ValidationMessageFor(c => c.Category)
                        </div>
                    </div>
                    <footer class="card-footer">
                        <p class="float-left card-text">Characters Remaining: <span class="badge badge-pill badge-success" id="TextAreaWordCounter">280</span></p>
                        <input type="submit" class="btn btn-primary float-right" value="Submit Post" id="SubmitPost">
                    </footer>
                </div>
            }
            <div id="postWall">

            </div>
        </div>
        <div class="col-md-3 filter-div">
            <br />
            <br />
            <h4>Filter by category</h4>
            @foreach (var cat in Model.Categories) {
                string checkBoxId = "deletePost" + i;
                @Html.CheckBox(cat.Name, true, new { @class = "filter-checkbox", id = checkBoxId })
                @cat.Name <br />
                i++;
            }
        </div>
    </div>
</div>



@section Scripts{
    <script src="~/Scripts/custom/forum-posts.js"></script>
    <script src="~/Scripts/custom/forum-comments.js"></script>
}